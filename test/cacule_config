#!/usr/bin/bash

configure() {
echo "Enable CacULE CPU scheduler..."
scripts/config --enable CONFIG_CACULE_SCHED
scripts/config --disable CONFIG_FAIR_GROUP_SCHED
scripts/config --disable CONFIG_SCHED_AUTOGROUP
#scripts/config --set-val CONFIG_NR_CPUS "12"
echo "General Setup"
scripts/config --disable CONFIG_SECURITY
scripts/config --disable CONFIG_HARDENED_USERCOPY
scripts/config --disable CONFIG_EXPERT
scripts/config --disable CONFIG_BSD_PROCESS_ACCT
scripts/config --disable CONFIG_TASK_XACCT
scripts/config --disable CONFIG_PSI
scripts/config --disable CONFIG_AUDIT
scripts/config --disable CONFIG_VIRT_CPU_ACCOUNTING_GEN
scripts/config --enable CONFIG_TICK_CPU_ACCOUNTING
scripts/config --disable CONFIG_CGROUP_CPUACCT
scripts/config --disable CONFIG_CGROUP_DEBUG
scripts/config --disable CONFIG_CHECKPOINT_RESTORE
scripts/config --disable CONFIG_SLAB_MERGE_DEFAULT
scripts/config --disable CONFIG_SLAB_FREELIST_HARDENED
scripts/config --disable CONFIG_SLUB_CPU_PARTIAL
scripts/config --disable CONFIG_PROFILING
echo "Processor type and features Cacule"
scripts/config --disable CONFIG_RETPOLINE
scripts/config --disable CONFIG_X86_5LEVEL
scripts/config --disable CONFIG_KEXEC
scripts/config --disable CONFIG_KEXEC_FILE
scripts/config --disable CONFIG_CRASH_DUMP
scripts/config --disable CONFIG_EXPERT
echo "Enable PREEMPT"
scripts/config --disable CONFIG_PREEMPT_NONE
scripts/config --disable CONFIG_PREEMPT_VOLUNTARY
scripts/config --enable CONFIG_PREEMPT
scripts/config --enable CONFIG_PREEMPT_COUNT
scripts/config --enable CONFIG_PREEMPTION
echo "General architecture-dependent options Cacule"
scripts/config --disable CONFIG_KPROBES
scripts/config --disable CONFIG_STACKPROTECTOR
scripts/config --disable CONFIG_VMAP_STACK
echo "Kernel hacking Cacule"
scripts/config --disable CONFIG_FTRACE
scripts/config --disable CONFIG_DEBUG_KERNEL
scripts/config --disable CONFIG_PAGE_EXTENSION
scripts/config --disable CONFIG_PRINTK_TIME
scripts/config --disable CONFIG_DEBUG_INFO
scripts/config --set-val CONFIG_RCU_CPU_STALL_TIMEOUT 4
scripts/config --disable CONFIG_ENABLE_MUST_CHECK
scripts/config --disable CONFIG_STRIP_ASM_SYMS
scripts/config --disable CONFIG_UNUSED_SYMBOLS
scripts/config --disable CONFIG_DEBUG_FS
scripts/config --disable CONFIG_OPTIMIZE_INLINING
scripts/config --disable CONFIG_DEBUG_SECTION_MISMATCH
scripts/config --disable CONFIG_SECTION_MISMATCH_WARN_ONLY
scripts/config --disable CONFIG_STACK_VALIDATION
scripts/config --disable CONFIG_DEBUG_FORCE_WEAK_PER_CPU
scripts/config --disable CONFIG_MAGIC_SYSRQ
scripts/config --disable CONFIG_MAGIC_SYSRQ_SERIAL
scripts/config --disable CONFIG_PAGE_EXTENSION
scripts/config --disable CONFIG_DEBUG_PAGEALLOC
scripts/config --disable CONFIG_PAGE_OWNER
scripts/config --disable CONFIG_DEBUG_MEMORY_INIT
scripts/config --disable CONFIG_HARDLOCKUP_DETECTOR
scripts/config --disable CONFIG_SOFTLOCKUP_DETECTOR
scripts/config --disable CONFIG_DETECT_HUNG_TASK
scripts/config --disable CONFIG_WQ_WATCHDOG
scripts/config --disable CONFIG_SCHED_DEBUG
scripts/config --disable CONFIG_SCHEDSTATS
scripts/config --set-val CONFIG_PANIC_TIMEOUT 10
scripts/config --disable CONFIG_SCHED_STACK_END_CHECK
scripts/config --disable CONFIG_DEBUG_BUGVERBOSE
scripts/config --disable CONFIG_RCU_TRACE
scripts/config --set-val CONFIG_RCU_CPU_STALL_TIMEOUT 4
scripts/config --disable CONFIG_FAULT_INJECTION
scripts/config --disable CONFIG_LATENCYTOP
scripts/config --disable CONFIG_PROVIDE_OHCI1394_DMA_INIT
scripts/config --disable RUNTIME_TESTING_MENU
scripts/config --disable CONFIG_MEMTEST
scripts/config --disable CONFIG_KGDB
scripts/config --disable CONFIG_EARLY_PRINTK
scripts/config --disable CONFIG_DOUBLEFAULT
echo "Set PCIEASPM DRIVER to performance"
scripts/config --enable CONFIG_PCIEASPM
scripts/config --enable CONFIG_PCIEASPM_PERFORMANCE
echo "Set CONFIG_PCIE_BUS for performance"
scripts/config --enable CONFIG_PCIE_BUS_PERFORMANCE
echo "Enable CONFIG_CC_OPTIMIZE_FOR_PERFORMANCE_O3"
scripts/config --disable CONFIG_CC_OPTIMIZE_FOR_PERFORMANCE
scripts/config --disable CONFIG_CC_OPTIMIZE_FOR_SIZE
scripts/config --enable CONFIG_CC_OPTIMIZE_FOR_PERFORMANCE_O3
echo "Set module compression to ZSTD"
scripts/config --enable CONFIG_MODULE_COMPRESS
scripts/config --disable CONFIG_MODULE_COMPRESS_XZ
scripts/config --enable CONFIG_MODULE_COMPRESS_ZSTD
scripts/config --set-val CONFIG_MODULE_COMPRESS_ZSTD_LEVEL 19
   scripts/config --disable CONFIG_SLUB_DEBUG
   scripts/config --disable CONFIG_PM_DEBUG
   scripts/config --disable CONFIG_PM_ADVANCED_DEBUG
   scripts/config --disable CONFIG_PM_SLEEP_DEBUG
   scripts/config --disable CONFIG_ACPI_DEBUG
   scripts/config --disable CONFIG_SCHED_DEBUG
   scripts/config --disable CONFIG_LATENCYTOP
   scripts/config --disable CONFIG_DEBUG_PREEMPT
   scripts/config --disable CONFIG_DEBUG_INFO
   scripts/config --disable CONFIG_CGROUP_BPF
   scripts/config --disable CONFIG_BPF_LSM
   scripts/config --disable CONFIG_BPF_PRELOAD
   scripts/config --disable CONFIG_BPF_LIRC_MODE2
   scripts/config --disable CONFIG_BPF_KPROBE_OVERRIDE
   scripts/config --disable CONFIG_DEBUG_INFO_REDUCED
   scripts/config --disable CONFIG_DEBUG_INFO_COMPRESSED
   scripts/config --disable CONFIG_DEBUG_INFO_SPLI
   scripts/config --disable CONFIG_GDB_SCRIPTS
   scripts/config --disable CONFIG_DEBUG_INFO_DWARF4
   scripts/config --disable CONFIG_DEBUG_INFO_BTF
   scripts/config --disable CONFIG_BPF_PRELOAD
   scripts/config --disable CONFIG_BPF_PRELOAD_UMD
   scripts/config --disable CONFIG_BPF_STREAM_PARSER
   scripts/config --disable CONFIG_DMA_API_DEBUG
   scripts/config --disable CONFIG_DMA_API_DEBUG_SG
   scripts/config --disable CONFIG_DMA_MAP_BENCHMARK
   scripts/config --disable CONFIG_DEBUG_FS
   scripts/config --disable CONFIG_GCOV_KERNEL
   scripts/config --disable CONFIG_GCOV_PROFILE_ALL
   scripts/config --disable CONFIG_DEBUG_FS
   scripts/config --disable CONFIG_GENERIC_IRQ_DEBUGFS
   scripts/config --disable CONFIG_ACPI_DEBUGGER
   scripts/config --disable CONFIG_ACPI_DEBUGGER_USER
   scripts/config --disable CONFIG_ACPI_EC_DEBUGFS
   scripts/config --disable CONFIG_ACPI_APEI_ERST_DEBUG
   scripts/config --disable CONFIG_NFIT_SECURITY_DEBUG
   scripts/config --disable CONFIG_DMADEVICES_DEBUG
   scripts/config --disable CONFIG_DMADEVICES_VDEBUG
   scripts/config --disable CONFIG_DMATEST
   scripts/config --disable CONFIG_BTRFS_DEBUG
   scripts/config --disable CONFIG_BTRFS_FS_REF_VERIFY
   scripts/config --disable CONFIG_BTRFS_ASSERT
   scripts/config --disable CONFIG_BTRFS_FS_RUN_SANITY_TESTS
   scripts/config --disable CONFIG_BTRFS_FS_CHECK_INTEGRITY
   scripts/config --disable CONFIG_EXT4_DEBUG
   scripts/config --disable CONFIG_EXT4_KUNIT_TESTS
   scripts/config --disable CONFIG_SECURITY_APPARMOR_DEBUG
   scripts/config --disable CONFIG_SECURITY_APPARMOR_DEBUG_ASSERTS
   scripts/config --disable CONFIG_SECURITY_APPARMOR_DEBUG_MESSAGES
   scripts/config --disable CONFIG_SECURITY_APPARMOR_KUNIT_TEST
   scripts/config --disable CONFIG_POWER_SUPPLY_DEBUG
   scripts/config --disable CONFIG_NTFS_DEBUG
   scripts/config --disable CONFIG_GENERIC_IRQ_DEBUGFS
   scripts/config --disable CONFIG_CIFS_STATS2
   scripts/config --disable CONFIG_CIFS_DEBUG
   scripts/config --disable CONFIG_CIFS_DEBUG2
   scripts/config --disable CONFIG_CIFS_DEBUG_DUMP_KEYS
   scripts/config --disable CONFIG_JBD2_DEBUG
   scripts/config --disable CONFIG_CONFIG_NFS_DEBUG
   scripts/config --disable CONFIG_TRACE_IRQFLAGS_SUPPORT
   scripts/config --disable CONFIG_TRACE_IRQFLAGS_NMI_SUPPORT
   scripts/config --disable CONFIG_EARLY_PRINTK_USB
   scripts/config --disable CONFIG_X86_VERBOSE_BOOTUP
   scripts/config --disable CONFIG_EARLY_PRINTK
   scripts/config --disable CONFIG_EARLY_PRINTK_DBGP
   scripts/config --disable CONFIG_EARLY_PRINTK_USB_XDBC
   scripts/config --disable CONFIG_EFI_PGT_DUMP
   scripts/config --disable CONFIG_DEBUG_TLBFLUSH
   scripts/config --disable CONFIG_IOMMU_DEBUG
   scripts/config --disable CONFIG_IOMMU_LEAK
   scripts/config --disable CONFIG_HAVE_MMIOTRACE_SUPPORT
   scripts/config --disable CONFIG_X86_DECODER_SELFTEST
   scripts/config --disable CONFIG_IO_DELAY_0X80
   scripts/config --disable CONFIG_IO_DELAY_0XED
   scripts/config --disable CONFIG_IO_DELAY_UDELAY
   scripts/config --disable CONFIG_IO_DELAY_NONE
   scripts/config --disable CONFIG_DEBUG_BOOT_PARAMS
   scripts/config --disable CONFIG_CPA_DEBUG
   scripts/config --disable CONFIG_DEBUG_ENTRY
   scripts/config --disable CONFIG_DEBUG_NMI_SELFTEST
   scripts/config --disable CONFIG_DEBUG_IMR_SELFTEST
   scripts/config --disable CONFIG_X86_DEBUG_FPU
   scripts/config --disable CONFIG_PUNIT_ATOM_DEBUG
   scripts/config --disable CONFIG_UNWINDER_ORC
   scripts/config --disable CONFIG_UNWINDER_FRAME_POINTER
   scripts/config --disable CONFIG_UNWINDER_GUESS
   scripts/config --disable CONFIG_FRAME_POINTER
   scripts/config --disable CONFIG_THINKPAD_ACPI_DEBUGFACILITIES
   scripts/config --disable CONFIG_THINKPAD_ACPI_DEBUG
   scripts/config --disable CONFIG_THINKPAD_ACPI_UNSAFE_LEDS
   scripts/config --disable CONFIG_CMA_DEBUG
   scripts/config --disable CONFIG_CMA_DEBUGFS
   scripts/config --disable CONFIG_EDAC_DEBUG
   scripts/config --disable CONFIG_ATM_IA_DEBUG
   scripts/config --disable CONFIG_ATM_FORE200E_DEBUG
   scripts/config --disable CONFIG_BCMA_DEBUG
   scripts/config --enable CONFIG_GENERIC_CPU

}
