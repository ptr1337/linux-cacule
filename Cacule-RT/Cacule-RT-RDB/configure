#!/usr/bin/bash

cacule_config() {
# This script sets the recommended/suggested configs by Hamad Al Marri
# run this inside the kernel directory

# General Setup
scripts/config --disable CONFIG_EXPERT
scripts/config --enable CONFIG_NO_HZ_FULL
scripts/config --enable CONFIG_PREEMPT
scripts/config --disable CONFIG_SCHED_AUTOGROUP
scripts/config --disable CONFIG_BSD_PROCESS_ACCT
scripts/config --disable CONFIG_TASK_XACCT
scripts/config --disable CONFIG_PSI
scripts/config --disable CONFIG_MEMCG
scripts/config --disable CONFIG_CGROUP_CPUACCT
scripts/config --disable CONFIG_CGROUP_DEBUG
scripts/config --disable CONFIG_CHECKPOINT_RESTORE
scripts/config --disable CONFIG_SLAB_MERGE_DEFAULT
scripts/config --disable CONFIG_SLAB_FREELIST_HARDENED
scripts/config --disable CONFIG_SLUB_CPU_PARTIAL
scripts/config --disable CONFIG_PROFILING
# Processor type and features
scripts/config --disable CONFIG_RETPOLINE
scripts/config --disable CONFIG_X86_5LEVEL
scripts/config --disable CONFIG_KEXEC
scripts/config --disable CONFIG_KEXEC_FILE
scripts/config --disable CONFIG_CRASH_DUMP
scripts/config --enable HZ_1000
# Power
scripts/config --enable CONFIG_CPU_FREQ_DEFAULT_GOV_PERFORMANCE
scripts/config --enable CONFIG_CPU_FREQ_GOV_PERFORMANCE
scripts/config --disable CONFIG_CPU_FREQ_GOV_ONDEMAND

# General architecture-dependent options
scripts/config --disable CONFIG_KPROBES

# Kernel hacking
scripts/config --disable CONFIG_FTRACE
scripts/config --disable CONFIG_DEBUG_KERNEL
scripts/config --disable CONFIG_PAGE_EXTENSION
scripts/config --set-val CONFIG_RCU_CPU_STALL_TIMEOUT 4
scripts/config --disable CONFIG_PRINTK_TIME
scripts/config --disable CONFIG_DEBUG_INFO
scripts/config --disable CONFIG_ENABLE_MUST_CHECK
scripts/config --disable CONFIG_STRIP_ASM_SYMS
scripts/config --disable CONFIG_UNUSED_SYMBOLS
scripts/config --disable CONFIG_DEBUG_FS
scripts/config --disable CONFIG_OPTIMIZE_INLINING
scripts/config --disable CONFIG_DEBUG_SECTION_MISMATCH
scripts/config --disable CONFIG_SECTION_MISMATCH_WARN_ONLY
scripts/config --disable CONFIG_STACK_VALIDATION
scripts/config --disable CONFIG_DEBUG_FORCE_WEAK_PER_CPU
scripts/config --disable CONFIG_MAGIC_SYSRQ
scripts/config --disable CONFIG_MAGIC_SYSRQ_SERIAL
scripts/config --disable CONFIG_PAGE_EXTENSION
scripts/config --disable CONFIG_DEBUG_PAGEALLOC
scripts/config --disable CONFIG_PAGE_OWNER
scripts/config --disable CONFIG_DEBUG_MEMORY_INIT
scripts/config --disable CONFIG_HARDLOCKUP_DETECTOR
scripts/config --disable CONFIG_SOFTLOCKUP_DETECTOR
scripts/config --disable CONFIG_DETECT_HUNG_TASK
scripts/config --disable CONFIG_WQ_WATCHDOG
scripts/config --set-val CONFIG_PANIC_TIMEOUT 10
scripts/config --disable CONFIG_SCHED_DEBUG
scripts/config --disable CONFIG_SCHEDSTATS
scripts/config --disable CONFIG_SCHED_STACK_END_CHECK
scripts/config --disable CONFIG_STACKTRACE
scripts/config --disable CONFIG_DEBUG_BUGVERBOSE
scripts/config --set-val CONFIG_RCU_CPU_STALL_TIMEOUT 4
scripts/config --disable CONFIG_RCU_TRACE
scripts/config --disable CONFIG_FAULT_INJECTION
scripts/config --disable CONFIG_LATENCYTOP
scripts/config --disable CONFIG_PROVIDE_OHCI1394_DMA_INIT
scripts/config --disable RUNTIME_TESTING_MENU
scripts/config --disable CONFIG_MEMTEST
scripts/config --disable CONFIG_KGDB
scripts/config --disable CONFIG_EARLY_PRINTK
scripts/config --disable CONFIG_DOUBLEFAULT

}
